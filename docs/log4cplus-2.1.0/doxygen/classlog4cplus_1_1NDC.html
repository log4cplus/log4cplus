<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>log4cplus: log4cplus::NDC Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="log4cplus.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">log4cplus
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelog4cplus.html">log4cplus</a></li><li class="navelem"><a class="el" href="classlog4cplus_1_1NDC.html">NDC</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classlog4cplus_1_1NDC-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">log4cplus::NDC Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> class implements <em>nested diagnostic contexts</em> as defined by Neil Harrison in the article "Patterns for Logging
Diagnostic Messages" part of the book <em>"Pattern Languages of
Program Design 3"</em> edited by Martin et al.  
 <a href="classlog4cplus_1_1NDC.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ndc_8h_source.html">ndc.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a822956761c830e6b9c37795fc0252211"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a822956761c830e6b9c37795fc0252211">clear</a> ()</td></tr>
<tr class="memdesc:a822956761c830e6b9c37795fc0252211"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear any nested diagnostic information if any.  <a href="classlog4cplus_1_1NDC.html#a822956761c830e6b9c37795fc0252211">More...</a><br /></td></tr>
<tr class="separator:a822956761c830e6b9c37795fc0252211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b5a0763d669cd127afa640e586f6a13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelog4cplus.html#ac62a7721683971c9b4f2b697aa7f03fb">DiagnosticContextStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a7b5a0763d669cd127afa640e586f6a13">cloneStack</a> () const</td></tr>
<tr class="memdesc:a7b5a0763d669cd127afa640e586f6a13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clone the diagnostic context for the current thread.  <a href="classlog4cplus_1_1NDC.html#a7b5a0763d669cd127afa640e586f6a13">More...</a><br /></td></tr>
<tr class="separator:a7b5a0763d669cd127afa640e586f6a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64169c244e495627d267f8d2d1105d32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a64169c244e495627d267f8d2d1105d32">inherit</a> (const <a class="el" href="namespacelog4cplus.html#ac62a7721683971c9b4f2b697aa7f03fb">DiagnosticContextStack</a> &amp;stack)</td></tr>
<tr class="memdesc:a64169c244e495627d267f8d2d1105d32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inherit the diagnostic context of another thread.  <a href="classlog4cplus_1_1NDC.html#a64169c244e495627d267f8d2d1105d32">More...</a><br /></td></tr>
<tr class="separator:a64169c244e495627d267f8d2d1105d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61e54febe5b6482c95278932b3a8146d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelog4cplus.html#a3c9287f6ebcddc50355e29d71152117b">log4cplus::tstring</a> const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a61e54febe5b6482c95278932b3a8146d">get</a> () const</td></tr>
<tr class="memdesc:a61e54febe5b6482c95278932b3a8146d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used when printing the diagnostic context.  <a href="classlog4cplus_1_1NDC.html#a61e54febe5b6482c95278932b3a8146d">More...</a><br /></td></tr>
<tr class="separator:a61e54febe5b6482c95278932b3a8146d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c192fcb5006c24cf54e679e9e16c284"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a0c192fcb5006c24cf54e679e9e16c284">getDepth</a> () const</td></tr>
<tr class="memdesc:a0c192fcb5006c24cf54e679e9e16c284"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current nesting depth of this diagnostic context.  <a href="classlog4cplus_1_1NDC.html#a0c192fcb5006c24cf54e679e9e16c284">More...</a><br /></td></tr>
<tr class="separator:a0c192fcb5006c24cf54e679e9e16c284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f446e2479800b222b31cf7e30628c41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelog4cplus.html#a3c9287f6ebcddc50355e29d71152117b">log4cplus::tstring</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41">pop</a> ()</td></tr>
<tr class="memdesc:a3f446e2479800b222b31cf7e30628c41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clients should call this method before leaving a diagnostic context.  <a href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41">More...</a><br /></td></tr>
<tr class="separator:a3f446e2479800b222b31cf7e30628c41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5334784c1ddcc371d0140f5d97a6a1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#ac5334784c1ddcc371d0140f5d97a6a1e">pop_void</a> ()</td></tr>
<tr class="memdesc:ac5334784c1ddcc371d0140f5d97a6a1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41" title="Clients should call this method before leaving a diagnostic context.">pop()</a> but without the return value.  <a href="classlog4cplus_1_1NDC.html#ac5334784c1ddcc371d0140f5d97a6a1e">More...</a><br /></td></tr>
<tr class="separator:ac5334784c1ddcc371d0140f5d97a6a1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e4588abca929653ced95428bde78f02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelog4cplus.html#a3c9287f6ebcddc50355e29d71152117b">log4cplus::tstring</a> const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a6e4588abca929653ced95428bde78f02">peek</a> () const</td></tr>
<tr class="memdesc:a6e4588abca929653ced95428bde78f02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks at the last diagnostic context at the top of this <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> without removing it.  <a href="classlog4cplus_1_1NDC.html#a6e4588abca929653ced95428bde78f02">More...</a><br /></td></tr>
<tr class="separator:a6e4588abca929653ced95428bde78f02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ce2b0d8e4c225613fdd8a642a01c992"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a5ce2b0d8e4c225613fdd8a642a01c992">push</a> (const <a class="el" href="namespacelog4cplus.html#a3c9287f6ebcddc50355e29d71152117b">log4cplus::tstring</a> &amp;message)</td></tr>
<tr class="memdesc:a5ce2b0d8e4c225613fdd8a642a01c992"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push new diagnostic context information for the current thread.  <a href="classlog4cplus_1_1NDC.html#a5ce2b0d8e4c225613fdd8a642a01c992">More...</a><br /></td></tr>
<tr class="separator:a5ce2b0d8e4c225613fdd8a642a01c992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b4fb3774bbf66b9d8c995a57ee26feb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a5b4fb3774bbf66b9d8c995a57ee26feb">push</a> (<a class="el" href="namespacelog4cplus.html#a7b80b5711ae9e7a1ddd97dbaefbe3583">tchar</a> const *message)</td></tr>
<tr class="separator:a5b4fb3774bbf66b9d8c995a57ee26feb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43f2d8571dc52f6dc2bd737bb3f88099"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a43f2d8571dc52f6dc2bd737bb3f88099">remove</a> ()</td></tr>
<tr class="memdesc:a43f2d8571dc52f6dc2bd737bb3f88099"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the diagnostic context for this thread.  <a href="classlog4cplus_1_1NDC.html#a43f2d8571dc52f6dc2bd737bb3f88099">More...</a><br /></td></tr>
<tr class="separator:a43f2d8571dc52f6dc2bd737bb3f88099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af905c21dfc8a4aedb0ac46a6a66936ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#af905c21dfc8a4aedb0ac46a6a66936ff">setMaxDepth</a> (std::size_t maxDepth)</td></tr>
<tr class="memdesc:af905c21dfc8a4aedb0ac46a6a66936ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set maximum depth of this diagnostic context.  <a href="classlog4cplus_1_1NDC.html#af905c21dfc8a4aedb0ac46a6a66936ff">More...</a><br /></td></tr>
<tr class="separator:af905c21dfc8a4aedb0ac46a6a66936ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da3dcc190abd896c5f73cf1b968251f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a8da3dcc190abd896c5f73cf1b968251f">NDC</a> ()</td></tr>
<tr class="separator:a8da3dcc190abd896c5f73cf1b968251f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a574bfc5324baa601923df750a65e5c48"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlog4cplus_1_1NDC.html#a574bfc5324baa601923df750a65e5c48">~NDC</a> ()</td></tr>
<tr class="separator:a574bfc5324baa601923df750a65e5c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> class implements <em>nested diagnostic contexts</em> as defined by Neil Harrison in the article "Patterns for Logging
Diagnostic Messages" part of the book <em>"Pattern Languages of
Program Design 3"</em> edited by Martin et al. </p>
<p>A Nested Diagnostic Context, or <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> in short, is an instrument to distinguish interleaved log output from different sources. Log output is typically interleaved when a server handles multiple clients near-simultaneously.</p>
<p>Interleaved log output can still be meaningful if each log entry from different contexts had a distinctive stamp. This is where NDCs come into play.</p>
<p><em><b>Note that NDCs are managed on a per thread basis</b></em>. <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> operations such as <a class="el" href="classlog4cplus_1_1NDC.html#a5ce2b0d8e4c225613fdd8a642a01c992">push</a>, {<a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41">},  #clear},  #getDepth} and  #setMaxDepth} affect the NDC of the <em>current</em> thread only. NDCs of other threads remain unaffected. For example, a server can build a per client request NDC consisting the clients host name and other information contained in the the request. <em>Cookies</em> are another source of distinctive information. To build an NDC one uses the  #push} operation. Simply put, Contexts can be nested.When entering a context, call <code>push()</code>. As a side effect, if there is no nested diagnostic context for the current thread, this method will create it.When leaving a context, call <code>pop()</code>.When exiting a thread make sure to call <code>remove()</code>. There is no penalty for forgetting to match each push() operation with a corresponding pop(), except the obvious mismatch between the real application context and the context set in the NDC. Use of the NDCContextCreator class can automate this process and make your code exception-safe. If configured to do so,  log4cplus::PatternLayout} and  log4cplus::TTCCLayout} instances automatically retrieve the nested diagnostic context for the current thread without any user intervention. Hence, even if a server is serving multiple clients simultaneously, the logs emanating from the same code (belonging to the same logger) can still be distinguished because each client request will have a different NDC tag. Heavy duty systems should call the  #remove} method when leaving the run method of a thread. This ensures that the memory used by the thread can be freed. A thread may inherit the nested diagnostic context of another (possibly parent) thread using the  #inherit inherit} method. A thread may obtain a copy of its NDC with the { #cloneStack cloneStack} method and pass the reference to any other thread, in particular to a child. </a></p>

<p class="definition">Definition at line <a class="el" href="ndc_8h_source.html#l00105">105</a> of file <a class="el" href="ndc_8h_source.html">ndc.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8da3dcc190abd896c5f73cf1b968251f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8da3dcc190abd896c5f73cf1b968251f">&#9670;&nbsp;</a></span>NDC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">log4cplus::NDC::NDC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a574bfc5324baa601923df750a65e5c48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a574bfc5324baa601923df750a65e5c48">&#9670;&nbsp;</a></span>~NDC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual log4cplus::NDC::~NDC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a822956761c830e6b9c37795fc0252211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a822956761c830e6b9c37795fc0252211">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log4cplus::NDC::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear any nested diagnostic information if any. </p>
<p>This method is useful in cases where the same thread can be potentially used over and over in different unrelated contexts.</p>
<p>This method is equivalent to calling the <a class="el" href="classlog4cplus_1_1NDC.html#af905c21dfc8a4aedb0ac46a6a66936ff">setMaxDepth</a> method with a zero <code>maxDepth</code> argument. </p>

</div>
</div>
<a id="a7b5a0763d669cd127afa640e586f6a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b5a0763d669cd127afa640e586f6a13">&#9670;&nbsp;</a></span>cloneStack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelog4cplus.html#ac62a7721683971c9b4f2b697aa7f03fb">DiagnosticContextStack</a> log4cplus::NDC::cloneStack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clone the diagnostic context for the current thread. </p>
<p>Internally a diagnostic context is represented as a stack. A given thread can supply the stack (i.e. diagnostic context) to a child thread so that the child can inherit the parent thread's diagnostic context.</p>
<p>The child thread uses the <a class="el" href="classlog4cplus_1_1NDC.html#a64169c244e495627d267f8d2d1105d32">inherit</a> method to inherit the parent's diagnostic context.</p>
<dl class="section return"><dt>Returns</dt><dd>Stack A clone of the current thread's diagnostic context. </dd></dl>

</div>
</div>
<a id="a61e54febe5b6482c95278932b3a8146d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61e54febe5b6482c95278932b3a8146d">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelog4cplus.html#a3c9287f6ebcddc50355e29d71152117b">log4cplus::tstring</a> const&amp; log4cplus::NDC::get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used when printing the diagnostic context. </p>

<p class="reference">Referenced by <a class="el" href="loggingevent_8h_source.html#l00137">log4cplus::spi::InternalLoggingEvent::getNDC()</a>.</p>

</div>
</div>
<a id="a0c192fcb5006c24cf54e679e9e16c284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c192fcb5006c24cf54e679e9e16c284">&#9670;&nbsp;</a></span>getDepth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t log4cplus::NDC::getDepth </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current nesting depth of this diagnostic context. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classlog4cplus_1_1NDC.html#af905c21dfc8a4aedb0ac46a6a66936ff" title="Set maximum depth of this diagnostic context.">setMaxDepth</a> </dd></dl>

</div>
</div>
<a id="a64169c244e495627d267f8d2d1105d32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64169c244e495627d267f8d2d1105d32">&#9670;&nbsp;</a></span>inherit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log4cplus::NDC::inherit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacelog4cplus.html#ac62a7721683971c9b4f2b697aa7f03fb">DiagnosticContextStack</a> &amp;&#160;</td>
          <td class="paramname"><em>stack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inherit the diagnostic context of another thread. </p>
<p>The parent thread can obtain a reference to its diagnostic context using the <a class="el" href="classlog4cplus_1_1NDC.html#a7b5a0763d669cd127afa640e586f6a13">cloneStack</a> method. It should communicate this information to its child so that it may inherit the parent's diagnostic context.</p>
<p>The parent's diagnostic context is cloned before being inherited. In other words, once inherited, the two diagnostic contexts can be managed independently.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stack</td><td>The diagnostic context of the parent thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6e4588abca929653ced95428bde78f02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e4588abca929653ced95428bde78f02">&#9670;&nbsp;</a></span>peek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelog4cplus.html#a3c9287f6ebcddc50355e29d71152117b">log4cplus::tstring</a> const&amp; log4cplus::NDC::peek </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Looks at the last diagnostic context at the top of this <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> without removing it. </p>
<p>The returned value is the value that was pushed last. If no context is available, then the empty string is returned.</p>
<dl class="section return"><dt>Returns</dt><dd>String The innermost diagnostic context. </dd></dl>

</div>
</div>
<a id="a3f446e2479800b222b31cf7e30628c41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f446e2479800b222b31cf7e30628c41">&#9670;&nbsp;</a></span>pop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelog4cplus.html#a3c9287f6ebcddc50355e29d71152117b">log4cplus::tstring</a> log4cplus::NDC::pop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clients should call this method before leaving a diagnostic context. </p>
<p>The returned value is the value that was pushed last. If no context is available, then the empty string is returned. If each call to <code><a class="el" href="classlog4cplus_1_1NDC.html#a5ce2b0d8e4c225613fdd8a642a01c992" title="Push new diagnostic context information for the current thread.">push()</a></code> is paired with a call to <code><a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41" title="Clients should call this method before leaving a diagnostic context.">pop()</a></code> (even in presence of thrown exceptions), the last <code><a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41" title="Clients should call this method before leaving a diagnostic context.">pop()</a></code> call frees the memory used by <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> for this thread. Otherwise, <code><a class="el" href="classlog4cplus_1_1NDC.html#a43f2d8571dc52f6dc2bd737bb3f88099" title="Remove the diagnostic context for this thread.">remove()</a></code> must be called at the end of the thread to free the memory used by <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> for the thread.</p>
<dl class="section return"><dt>Returns</dt><dd>String The innermost diagnostic context.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classlog4cplus_1_1NDCContextCreator.html" title="This class ensures that a NDC::push() call is always matched with a NDC::pop() call even in the face ...">NDCContextCreator</a>, <a class="el" href="classlog4cplus_1_1NDC.html#a43f2d8571dc52f6dc2bd737bb3f88099" title="Remove the diagnostic context for this thread.">remove()</a>, <a class="el" href="classlog4cplus_1_1NDC.html#a5ce2b0d8e4c225613fdd8a642a01c992" title="Push new diagnostic context information for the current thread.">push()</a> </dd></dl>

</div>
</div>
<a id="ac5334784c1ddcc371d0140f5d97a6a1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5334784c1ddcc371d0140f5d97a6a1e">&#9670;&nbsp;</a></span>pop_void()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log4cplus::NDC::pop_void </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same as <a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41" title="Clients should call this method before leaving a diagnostic context.">pop()</a> but without the return value. </p>

</div>
</div>
<a id="a5ce2b0d8e4c225613fdd8a642a01c992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ce2b0d8e4c225613fdd8a642a01c992">&#9670;&nbsp;</a></span>push() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log4cplus::NDC::push </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacelog4cplus.html#a3c9287f6ebcddc50355e29d71152117b">log4cplus::tstring</a> &amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push new diagnostic context information for the current thread. </p>
<p>The contents of the <code>message</code> parameter is determined solely by the client. Each call to <a class="el" href="classlog4cplus_1_1NDC.html#a5ce2b0d8e4c225613fdd8a642a01c992" title="Push new diagnostic context information for the current thread.">push()</a> should be paired with a call to <a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41" title="Clients should call this method before leaving a diagnostic context.">pop()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The new diagnostic context information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classlog4cplus_1_1NDCContextCreator.html" title="This class ensures that a NDC::push() call is always matched with a NDC::pop() call even in the face ...">NDCContextCreator</a>, <a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41" title="Clients should call this method before leaving a diagnostic context.">pop()</a>, <a class="el" href="classlog4cplus_1_1NDC.html#a43f2d8571dc52f6dc2bd737bb3f88099" title="Remove the diagnostic context for this thread.">remove()</a> </dd></dl>

</div>
</div>
<a id="a5b4fb3774bbf66b9d8c995a57ee26feb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b4fb3774bbf66b9d8c995a57ee26feb">&#9670;&nbsp;</a></span>push() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log4cplus::NDC::push </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacelog4cplus.html#a7b80b5711ae9e7a1ddd97dbaefbe3583">tchar</a> const *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a43f2d8571dc52f6dc2bd737bb3f88099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43f2d8571dc52f6dc2bd737bb3f88099">&#9670;&nbsp;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log4cplus::NDC::remove </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the diagnostic context for this thread. </p>
<p>Each thread that created a diagnostic context by calling <a class="el" href="classlog4cplus_1_1NDC.html#a5ce2b0d8e4c225613fdd8a642a01c992" title="Push new diagnostic context information for the current thread.">push()</a> should call this method before exiting. Otherwise, the memory used by the thread cannot be reclaimed. It is possible to omit this call if and only if each <a class="el" href="classlog4cplus_1_1NDC.html#a5ce2b0d8e4c225613fdd8a642a01c992" title="Push new diagnostic context information for the current thread.">push()</a> call is always paired with a <a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41" title="Clients should call this method before leaving a diagnostic context.">pop()</a> call (even in presence of thrown exceptions). Then the memory used by <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> will be returned by the last <a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41" title="Clients should call this method before leaving a diagnostic context.">pop()</a> call and a call to <a class="el" href="classlog4cplus_1_1NDC.html#a43f2d8571dc52f6dc2bd737bb3f88099" title="Remove the diagnostic context for this thread.">remove()</a> will be no-op. </p>

</div>
</div>
<a id="af905c21dfc8a4aedb0ac46a6a66936ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af905c21dfc8a4aedb0ac46a6a66936ff">&#9670;&nbsp;</a></span>setMaxDepth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log4cplus::NDC::setMaxDepth </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>maxDepth</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set maximum depth of this diagnostic context. </p>
<p>If the current depth is smaller or equal to <code>maxDepth</code>, then no action is taken.</p>
<p>This method is a convenient alternative to multiple <code><a class="el" href="classlog4cplus_1_1NDC.html#a3f446e2479800b222b31cf7e30628c41" title="Clients should call this method before leaving a diagnostic context.">pop()</a></code> calls. Moreover, it is often the case that at the end of complex call sequences, the depth of the <a class="el" href="classlog4cplus_1_1NDC.html" title="The NDC class implements nested diagnostic contexts as defined by Neil Harrison in the article &quot;Patte...">NDC</a> is unpredictable. The <code><a class="el" href="classlog4cplus_1_1NDC.html#af905c21dfc8a4aedb0ac46a6a66936ff" title="Set maximum depth of this diagnostic context.">setMaxDepth()</a></code> method circumvents this problem.</p>
<p>For example, the combination</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> foo() {</div>
<div class="line">    <a class="code" href="classlog4cplus_1_1NDC.html#a8da3dcc190abd896c5f73cf1b968251f">NDC</a> &amp; ndc = <a class="code" href="namespacelog4cplus.html#a091093fda05383d6415ed5d146bc589f">getNDC</a>();</div>
<div class="line">    std::size_t depth = ndc.getDepth();</div>
<div class="line">    <span class="comment">//... complex sequence of calls</span></div>
<div class="line">    ndc.setMaxDepth(depth);</div>
<div class="line">}</div>
<div class="ttc" id="aclasslog4cplus_1_1NDC_html_a8da3dcc190abd896c5f73cf1b968251f"><div class="ttname"><a href="classlog4cplus_1_1NDC.html#a8da3dcc190abd896c5f73cf1b968251f">log4cplus::NDC::NDC</a></div><div class="ttdeci">NDC()</div></div>
<div class="ttc" id="anamespacelog4cplus_html_a091093fda05383d6415ed5d146bc589f"><div class="ttname"><a href="namespacelog4cplus.html#a091093fda05383d6415ed5d146bc589f">log4cplus::getNDC</a></div><div class="ttdeci">LOG4CPLUS_EXPORT NDC &amp; getNDC()</div><div class="ttdoc">Return a reference to the singleton object.</div></div>
</div><!-- fragment --><p>ensures that between the entry and exit of foo the depth of the diagnostic stack is conserved.</p>
<dl class="section note"><dt>Note</dt><dd>Use of the <a class="el" href="classlog4cplus_1_1NDCContextCreator.html" title="This class ensures that a NDC::push() call is always matched with a NDC::pop() call even in the face ...">NDCContextCreator</a> class will solve this particular problem.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classlog4cplus_1_1NDC.html#a0c192fcb5006c24cf54e679e9e16c284" title="Get the current nesting depth of this diagnostic context.">NDC::getDepth()</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ndc_8h_source.html">ndc.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 28 2023 19:27:01 for log4cplus by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
